code, pre {
  padding: 7px;
  font-size: $code-font-size;
  font-family: $code-font-family;
  background: $code-background;
}

code {
  padding: 3px 5px;
  border-radius: 4px;
  color: $code-color;
}

pre > code {
  display: block;
}

// highlight.js
figure.highlight {
  margin: 1em 0;
  border-radius: 5px;
  overflow-x: auto;
  box-shadow: 1px 1px 2px rgba(0,0,0,0.125);
  position: relative;

  table {
    position: relative;

    &::after {
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      padding: 2px 7px;
      font-size: $code-font-size;
      font-weight: bold;
      color: darken($gray, 10%);
      background: darken($code-background, 3%);
      content: 'Code';
    }
  }

  @each $sign, $text in $code-type-list {
    &.#{$sign} > table::after {
      content: $text;
    }
  }

  .code {
    pre {
      margin: 0;
      padding: 30px 10px 10px;
    }
  }

  .gutter {
    width: 10px;
    color: $gray;

    pre {
      margin: 0;
      padding: 30px 7px 10px;
    }
  }

  .line {
    // Fix code block null line height and
    // Synchronous gutter and code line highly.
    height: round($code-font-size * 1.5);
  }

  table, tr, td {
    margin: 0;
    padding: 0;
    width: 100%;
    border-collapse: collapse;
  }

  .code {
    .hljs-comment,
    .hljs-quote {
      color: map-get($code-highlight-color, comment);
    }

    .hljs-keyword,
    .hljs-selector-tag,
    .hljs-addition {
      color: map-get($code-highlight-color, keyword);
    }

    .hljs-number,
    .hljs-string,
    .hljs-meta .hljs-meta-string,
    .hljs-literal,
    .hljs-doctag,
    .hljs-regexp {
      color: map-get($code-highlight-color, number);
    }

    .hljs-title,
    .hljs-section,
    .hljs-name,
    .hljs-selector-id,
    .hljs-selector-class {
      color: map-get($code-highlight-color, title);
    }

    .hljs-attribute,
    .hljs-attr,
    .hljs-variable,
    .hljs-template-variable,
    .hljs-class .hljs-title,
    .hljs-type {
      color: map-get($code-highlight-color, attribute);
    }

    .hljs-symbol,
    .hljs-bullet,
    .hljs-subst,
    .hljs-meta,
    .hljs-meta .hljs-keyword,
    .hljs-selector-attr,
    .hljs-selector-pseudo,
    .hljs-link {
      color: map-get($code-highlight-color, symbol);
    }

    .hljs-built_in,
    .hljs-deletion {
      color: map-get($code-highlight-color, built_in);
    }

    .hljs-formula {
      background: map-get($code-highlight-color, formula);
    }

    .hljs-emphasis {
      font-style: italic;
    }

    .hljs-strong {
      font-weight: bold;
    }
  }
}

// chroma
.highlight > .chroma {
  margin: 1em 0;
  border-radius: 5px;
  overflow-x: auto;
  box-shadow: 1px 1px 2px rgba(0,0,0,0.125);
  position: relative;
  background: $code-background;

  code {
    padding: 0;
  }

  table {
    position: relative;

    &::after {
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      padding: 2px 7px;
      font-size: $code-font-size;
      font-weight: bold;
      color: darken($gray, 10%);
      background: darken($code-background, 3%);
      content: 'Code';
    }
  }

  @each $sign, $text in $code-type-list {
    &.#{$sign} > table::after {
      content: $text;
    }
  }

  .lntd {
    // Fix code block null line height and
    // Synchronous gutter and code line highly.
    line-height: round($code-font-size * 1.5);

    &:first-child {
      width: 10px;

      pre {
        margin: 0;
        padding: 30px 7px 10px;
      }
    }

    &:last-child {
      vertical-align: top;

      pre {
        margin: 0;
        padding: 30px 10px 10px;
      }
    }
  }

  table, tr, td {
    margin: 0;
    padding: 0;
    width: 100%;
    border-collapse: collapse;
  }

  /* LineNumbersTable */  .lnt { color: $gray; }
  /* LineHighlight */  .hl { display: block; width: 100%; background-color: #ffffcc }

  /* Keyword */ .chroma .k { color: #007020; font-weight: bold }
  /* KeywordConstant */ .chroma .kc { color: #007020; font-weight: bold }
  /* KeywordDeclaration */ .chroma .kd { color: #007020; font-weight: bold }
  /* KeywordNamespace */ .chroma .kn { color: #007020; font-weight: bold }
  /* KeywordPseudo */ .chroma .kp { color: #007020 }
  /* KeywordReserved */ .chroma .kr { color: #007020; font-weight: bold }
  /* KeywordType */ .chroma .kt { color: #902000 }
  /* Name */ .chroma .n {  }
  /* NameAttribute */ .chroma .na { color: #4070a0 }
  /* NameBuiltin */ .chroma .nb { color: #007020 }
  /* NameBuiltinPseudo */ .chroma .bp {  }
  /* NameClass */ .chroma .nc { color: #0e84b5; font-weight: bold }
  /* NameConstant */ .chroma .no { color: #60add5 }
  /* NameDecorator */ .chroma .nd { color: #555555; font-weight: bold }
  /* NameEntity */ .chroma .ni { color: #d55537; font-weight: bold }
  /* NameException */ .chroma .ne { color: #007020 }
  /* NameFunction */ .chroma .nf { color: #06287e }
  /* NameFunctionMagic */ .chroma .fm {  }
  /* NameLabel */ .chroma .nl { color: #002070; font-weight: bold }
  /* NameNamespace */ .chroma .nn { color: #0e84b5; font-weight: bold }
  /* NameOther */ .chroma .nx {  }
  /* NameProperty */ .chroma .py {  }
  /* NameTag */ .chroma .nt { color: #062873; font-weight: bold }
  /* NameVariable */ .chroma .nv { color: #bb60d5 }
  /* NameVariableClass */ .chroma .vc {  }
  /* NameVariableGlobal */ .chroma .vg {  }
  /* NameVariableInstance */ .chroma .vi {  }
  /* NameVariableMagic */ .chroma .vm {  }
  /* Literal */ .chroma .l {  }
  /* LiteralDate */ .chroma .ld {  }
  /* LiteralString */ .chroma .s { color: #4070a0 }
  /* LiteralStringAffix */ .chroma .sa { color: #4070a0 }
  /* LiteralStringBacktick */ .chroma .sb { color: #4070a0 }
  /* LiteralStringChar */ .chroma .sc { color: #4070a0 }
  /* LiteralStringDelimiter */ .chroma .dl { color: #4070a0 }
  /* LiteralStringDoc */ .chroma .sd { color: #4070a0; font-style: italic }
  /* LiteralStringDouble */ .chroma .s2 { color: #4070a0 }
  /* LiteralStringEscape */ .chroma .se { color: #4070a0; font-weight: bold }
  /* LiteralStringHeredoc */ .chroma .sh { color: #4070a0 }
  /* LiteralStringInterpol */ .chroma .si { color: #70a0d0; font-style: italic }
  /* LiteralStringOther */ .chroma .sx { color: #c65d09 }
  /* LiteralStringRegex */ .chroma .sr { color: #235388 }
  /* LiteralStringSingle */ .chroma .s1 { color: #4070a0 }
  /* LiteralStringSymbol */ .chroma .ss { color: #517918 }
  /* LiteralNumber */ .chroma .m { color: #40a070 }
  /* LiteralNumberBin */ .chroma .mb { color: #40a070 }
  /* LiteralNumberFloat */ .chroma .mf { color: #40a070 }
  /* LiteralNumberHex */ .chroma .mh { color: #40a070 }
  /* LiteralNumberInteger */ .chroma .mi { color: #40a070 }
  /* LiteralNumberIntegerLong */ .chroma .il { color: #40a070 }
  /* LiteralNumberOct */ .chroma .mo { color: #40a070 }
  /* Operator */ .chroma .o { color: #d55537 }
  /* OperatorWord */ .chroma .ow { color: #007020; font-weight: bold }
  /* Punctuation */ .chroma .p {  }
  /* Comment */ .chroma .c { color: #60a0b0; font-style: italic }
  /* CommentHashbang */ .chroma .ch { color: #60a0b0; font-style: italic }
  /* CommentMultiline */ .chroma .cm { color: #60a0b0; font-style: italic }
  /* CommentSingle */ .chroma .c1 { color: #60a0b0; font-style: italic }
  /* CommentSpecial */ .chroma .cs { color: #60a0b0; background-color: #fff0f0 }
  /* CommentPreproc */ .chroma .cp { color: #007020 }
  /* CommentPreprocFile */ .chroma .cpf { color: #007020 }
  /* Generic */ .chroma .g {  }
  /* GenericDeleted */ .chroma .gd { color: #a00000 }
  /* GenericEmph */ .chroma .ge { font-style: italic }
  /* GenericError */ .chroma .gr { color: #ff0000 }
  /* GenericHeading */ .chroma .gh { color: #000080; font-weight: bold }
  /* GenericInserted */ .chroma .gi { color: #00a000 }
  /* GenericOutput */ .chroma .go { color: #888888 }
  /* GenericPrompt */ .chroma .gp { color: #c65d09; font-weight: bold }
  /* GenericStrong */ .chroma .gs { font-weight: bold }
  /* GenericSubheading */ .chroma .gu { color: #800080; font-weight: bold }
  /* GenericTraceback */ .chroma .gt { color: #0044dd }
  /* GenericUnderline */ .chroma .gl { text-decoration: underline }
  /* TextWhitespace */ .chroma .w { color: #bbbbbb }
}
